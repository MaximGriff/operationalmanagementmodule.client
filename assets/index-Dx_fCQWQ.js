import{j as t,r as u}from"./react-cAKyJgT9.js";import{c as O}from"./react-dom-BuRsME7c.js";import{u as N,a as B,B as I,R as H,b as P}from"./react-router-tKvGmP9B.js";import"./@ant-design-CrEIbJ0Z.js";import{B as F,C as R,s as A,I as k,S as U}from"./antd-D-os5ckN.js";import{e as C}from"./react-unity-webgl-Bk7IW3s7.js";import"./classnames-ELZfJkp_.js";import"./scheduler-BNqrtbQi.js";import"./cookie--_YQFYBD.js";import"./rc-util-CNc3xdVw.js";import"./@babel-FmsFFq6i.js";import"./@emotion-CW87jbl0.js";import"./stylis-D5iaQeiq.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-picker-CD4YbAvG.js";import"./rc-resize-observer-DJKys2nY.js";import"./rc-motion-C75AOMAB.js";import"./rc-overflow-CksbVkIx.js";import"./@rc-component-CWPIUGqW.js";import"./rc-menu-BdumgdTP.js";import"./rc-tabs-BBnnS-R-.js";import"./rc-dropdown-DjrQR0gh.js";import"./rc-field-form-BZx8nPGS.js";import"./rc-input-vuXsRPXB.js";import"./rc-textarea-BoNMampF.js";import"./rc-notification-CMbcuJHu.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))p(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&p(h)}).observe(document,{childList:!0,subtree:!0});function c(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function p(e){if(e.ep)return;e.ep=!0;const a=c(e);fetch(e.href,a)}})();function f(i){const m=[t.jsx(F,{onClick:i.diagrammGantt,children:"Диаграмма Ганта"})];return t.jsx(t.Fragment,{children:t.jsxs(R,{title:i.title,actions:m,extra:t.jsx("a",{onClick:i.getSequence,children:"Рассчитать время"}),style:{width:600},children:["Общее время обработки всех деталей: ",parseFloat(i.content).toFixed(2)]})})}function J(){const[i,m]=u.useState({numberMachines:0,numberDetails:0}),[c,p]=u.useState({seqFirstGeneral:"",seqSecondGeneral:"",seqThirtyGeneral:"",seqFourthGeneral:"",seqFifthGeneral:"",seqSum1:"",seqSum2:"",seqDifference:""}),[e,a]=u.useState({timeFirstGeneral:0,timeSecondGeneral:0,timeThirtyGeneral:0,timeFourthGeneral:0,timeFifthGeneral:0,timeSum1:0,timeSum2:0,timeDifference:0}),h=N(),G=u.useRef(null),[S,g]=A.useMessage(),D=()=>{S.open({type:"success",content:"Матрица сгенерирована"})},w=()=>{S.open({type:"success",content:"Матрица получена из файла"})},y=(s,o,d)=>fetch(s,{method:o,headers:new Headers({"Content-Type":"application/json"}),credentials:"include",body:JSON.stringify(d)}),M=(s,o)=>fetch(s,{method:o,headers:new Headers({"Content-Type":"application/json"}),credentials:"include"});async function T(){let s="https://localhost:7007/api/matrix",o={filePath:G.current.input.value};(await y(s,"POST",o)).status==200&&(console.log("EEE"),D())}async function j(){let s="https://localhost:7007/api/matrix",o={filePath:G.current.input.value};const d=await y(s,"PUT",o);if(d.status==200){w();const x=await d.json();m({numberDetails:x[0].length-1,numberMachines:x.length-1})}}async function n(s,o,d){let x="https://localhost:7007/api/algorithm/"+s,q="";const v=await M(x,"GET");if(v.status==200){const b=await v.text();p(E=>({...E,[o]:b})),q=b}const L=await y("https://localhost:7007/api/calculation","PUT",{sequence:q});if(L.status==200){const b=await L.text();a(E=>({...E,[d]:b}))}}const r=(s,o,d,x,q)=>{h("/gantt",{state:{numberMachines:s,numberDetails:o,generalTime:d,sequence:x,name:q}})};async function l(){await n("first","seqFirstGeneral","timeFirstGeneral"),await n("second","seqSecondGeneral","timeSecondGeneral"),await n("thirty","seqThirtyGeneral","timeThirtyGeneral"),await n("fourth","seqFourthGeneral","timeFourthGeneral"),await n("fifth","seqFifthGeneral","timeFifthGeneral"),await n("sum-el-no-last","seqSum1","timeSum1"),await n("sum-el-no-first","seqSum2","timeSum2"),await n("difference","seqDifference","timeDifference")}return u.useEffect(()=>{j()},[]),t.jsxs(t.Fragment,{children:[g,t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx(k,{ref:G,style:{width:"100%"},defaultValue:"C:\\Users\\grise\\OneDrive\\Рабочий стол\\SimpleMatrix.xlsx"}),t.jsxs("div",{children:[t.jsx(F,{type:"primary",style:{margin:"10px"},onClick:T,children:"Записать данные в Excel"}),t.jsx(F,{type:"primary",onClick:j,children:"Получить данные из Excel"})]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(U,{style:{marginInline:"30px"},title:"Количество деталей",value:i.numberDetails}),t.jsx(U,{style:{marginInline:"30px"},title:"Количество станков",value:i.numberMachines})]}),t.jsx(F,{onClick:l,children:"Подсчитать все алгоритмы"})]}),t.jsx(f,{title:"Первое обобщение Джонсона",content:e.timeFirstGeneral,getSequence:()=>n("first","seqFirstGeneral","timeFirstGeneral"),diagrammGantt:()=>r(i.numberMachines,i.numberDetails,e.timeFirstGeneral,c.seqFirstGeneral,"Первое обобщение Джонсона")}),t.jsx(f,{title:"Второе обобщение Джонсона",content:e.timeSecondGeneral,getSequence:()=>n("second","seqSecondGeneral","timeSecondGeneral"),diagrammGantt:()=>r(i.numberMachines,i.numberDetails,e.timeSecondGeneral,c.seqSecondGeneral,"Второе обобщение Джонсона")}),t.jsx(f,{title:"Третье обобщение Джонсона",content:e.timeThirtyGeneral,getSequence:()=>n("thirty","seqThirtyGeneral","timeThirtyGeneral"),diagrammGantt:()=>r(i.numberMachines,i.numberDetails,e.timeThirtyGeneral,c.seqThirtyGeneral,"Третье обобщение Джонсона")}),t.jsx(f,{title:"Четвертое обобщение Джонсона",content:e.timeFourthGeneral,getSequence:()=>n("fourth","seqFourthGeneral","timeFourthGeneral"),diagrammGantt:()=>r(i.numberMachines,i.numberDetails,e.timeFourthGeneral,c.seqFourthGeneral,"Четвертое обобщение Джонсона")}),t.jsx(f,{title:"Пятое обобщение Джонсона",content:e.timeFifthGeneral,getSequence:()=>n("fifth","seqFifthGeneral","timeFifthGeneral"),diagrammGantt:()=>r(i.numberMachines,i.numberDetails,e.timeFifthGeneral,c.seqFifthGeneral,"Пятое обобщение Джонсона")}),t.jsx(f,{title:"Первый метод Петрова-Соколицина",content:e.timeSum1,getSequence:()=>n("sum-el-no-last","seqSum1","timeSum1"),diagrammGantt:()=>r(i.numberMachines,i.numberDetails,e.timeSum1,c.seqSum2,"Метод суммы без последнего элемента Петрова-Соколицина")}),t.jsx(f,{title:"Второй метод Петрова-Соколицина",content:e.timeSum2,getSequence:()=>n("sum-el-no-first","seqSum2","timeSum2"),diagrammGantt:()=>r(i.numberMachines,i.numberDetails,e.timeSum2,c.seqDifference,"Метод суммы без первого элемента Петрова-Соколицина")}),t.jsx(f,{title:"Третий метод Петрова-Соколицина",content:e.timeDifference,getSequence:()=>n("difference","seqDifference","timeDifference"),diagrammGantt:()=>r(i.numberMachines,i.numberDetails,e.timeDifference,c.seqDifference,"Метод разности Петрова-Соколицина")})]})]})}function X(i){const[m,c]=u.useState(null),p=B(),{state:e}=p,[a,h]=u.useState({}),{isLoaded:G}=C.useUnityContext(),{unityProvider:S,sendMessage:g}=C.useUnityContext({loaderUrl:"Build/public.loader.js",dataUrl:"Build/public.data.br",frameworkUrl:"Build/public.framework.js.br",codeUrl:"Build/public.wasm.br"}),D=(n,r,l)=>fetch(n,{method:r,headers:new Headers({"Content-Type":"application/json"}),credentials:"include",body:JSON.stringify(l)});function w(n,r,l,s){var o=JSON.stringify({numberMachines:n,numberDetails:r,generalTime:l,sequence:s});g("EventHandler","sendNumbersSeqToUnity",o)}function y(n){for(let l=0;l<n.length;l++)for(let s=0;s<n[0].length;s++){var r=JSON.stringify({numberEl:s,element:n[l][s]});g("EventHandler","sendMatrixToUnity",r)}}function M(){g("EventHandler","createDiagram")}function T(){w(e.numberMachines,e.numberDetails,e.generalTime,e.sequence),y(m),M()}async function j(){let n="https://localhost:7007/api/calculation/matrix",r={sequence:e.sequence};const l=await D(n,"PUT",r);if(l.status==200){const s=await l.json();c(s)}}return window.GetIsLoad=function(n){const r=JSON.parse(n);console.log(r.isLoad),h(r.isLoad)},u.useEffect(()=>{j()},[]),u.useEffect(()=>{setTimeout(()=>{T()},3e3)},[a]),t.jsxs(t.Fragment,{children:[t.jsx("h3",{children:e.name}),e.sequence.slice(0,-1).replace(/ /g,"-"),t.jsx("div",{children:t.jsx(C.Unity,{unityProvider:S,style:{width:1e3,height:450},id:"unityContainer"})})]})}function _(){return u.useEffect(()=>{},[]),t.jsx("div",{children:t.jsx(I,{children:t.jsx("main",{children:t.jsxs(H,{children:[t.jsx(P,{path:"/",element:t.jsx(J,{})}),t.jsx(P,{path:"/gantt",element:t.jsx(X,{})})]})})})})}O.createRoot(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(_,{})}));
